(this.webpackJsonplogin=this.webpackJsonplogin||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){},153:function(e,t,n){},154:function(e,t,n){},155:function(e,t,n){},156:function(e,t,n){},157:function(e,t,n){},158:function(e,t,n){},159:function(e,t,n){},160:function(e,t,n){},161:function(e,t,n){},162:function(e,t,n){},163:function(e,t,n){},165:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n(43),r=n.n(c),a=n(10),i=n(3),o=n(17),j=n(18),l=n(20),u=n(19),b=(n(38),n(0)),d=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return Object(b.jsx)("div",{className:"log",children:Object(b.jsxs)("form",{children:[Object(b.jsx)("h1",{children:"Sign In"}),Object(b.jsx)("br",{}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"email",className:"form-control",placeholder:"Enter email"})}),Object(b.jsx)("br",{}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"password",className:"form-control",placeholder:"Enter password"})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsxs)("div",{className:"custom-control custom-checkbox",children:[Object(b.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"customCheck1"}),Object(b.jsx)("label",{className:"custom-control-label",htmlFor:"customCheck1",children:"Remember me"})]})}),Object(b.jsx)(a.b,{to:"/chatroom",children:Object(b.jsx)("button",{type:"submit",className:"btnn bg-light btn-block",children:Object(b.jsx)("strong",{children:"Submit"})})}),Object(b.jsx)("br",{}),Object(b.jsx)("p",{className:"forgot-password",children:Object(b.jsx)("a",{href:"/SignUp",className:" text-right",children:"Register An Account"})}),Object(b.jsx)("p",{className:"forgot-password",children:Object(b.jsx)("a",{href:"/forgotPass",className:"text-right",children:"Forgot My Password"})})]})})}}]),n}(s.Component),m=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return Object(b.jsxs)("form",{children:[Object(b.jsx)("h1",{children:Object(b.jsx)("strong",{children:"Sign Up"})}),Object(b.jsx)("br",{}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"text",className:"form-control",placeholder:"First name"})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"text",className:"form-control",placeholder:"Last name"})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"email",className:"form-control",placeholder:"Enter email"})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"password",className:"form-control",placeholder:"Enter password"})}),Object(b.jsx)("button",{type:"submit",className:"btnn btn-light btn-block",children:Object(b.jsx)("strong",{children:"Sign Up"})}),Object(b.jsx)("br",{}),Object(b.jsx)("p",{className:"forgot-password text-center",children:Object(b.jsx)("a",{href:"/Login",children:"Already Registered"})})]})}}]),n}(s.Component),h=n(167),O=n(168);n(90);var p=function(){return Object(b.jsx)("nav",{className:"navbar navbar-expand-lg fluid",children:Object(b.jsx)("h1",{className:"navbar-brand",children:Object(b.jsx)("strong",{children:"Bandstand"})})})},x=(n(91),n(27)),f=n(78),g=["user-top-read","user-read-currently-playing","user-read-playback-state"],v=window.location.hash.substring(1).split("&").reduce((function(e,t){if(t){var n=t.split("=");e[n[0]]=decodeURIComponent(n[1])}return e}),{});window.location.hash="";var y=v,N=(n(92),function(e){var t={backgroundImage:"url(".concat(e.item.album.images[0].url,")")},n={width:100*e.progress_ms/e.item.duration_ms+"%"};return Object(b.jsx)("div",{className:"App",children:Object(b.jsxs)("div",{className:"main-wrapper",children:[Object(b.jsx)("div",{className:"now-playing__img",children:Object(b.jsx)("img",{src:e.item.album.images[0].url,alt:"album covers"})}),Object(b.jsxs)("div",{className:"now-playing__side",children:[Object(b.jsx)("div",{className:"now-playing__name",children:e.item.name}),Object(b.jsx)("div",{className:"now-playing__artist",children:e.item.artists[0].name}),Object(b.jsx)("div",{className:"now-playing__status",children:e.is_playing?"Playing":"Paused"}),Object(b.jsx)("div",{className:"progress",children:Object(b.jsx)("div",{className:"progress__bar",style:n})})]}),Object(b.jsx)("div",{className:"background",style:t})," "]})})}),w=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={token:null,item:{album:{images:[{url:""}]},name:"",artists:[{name:""}],duration_ms:0},is_playing:"Paused",progress_ms:0,no_data:!1},e.getCurrentlyPlaying=e.getCurrentlyPlaying.bind(Object(x.a)(e)),e.tick=e.tick.bind(Object(x.a)(e)),e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=y.access_token;t&&(this.setState({token:t}),this.getCurrentlyPlaying(t)),this.interval=setInterval((function(){return e.tick()}),5e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"tick",value:function(){this.state.token&&this.getCurrentlyPlaying(this.state.token)}},{key:"getCurrentlyPlaying",value:function(e){var t=this;f.ajax({url:"https://api.spotify.com/v1/me/player",type:"GET",beforeSend:function(t){t.setRequestHeader("Authorization","Bearer "+e)},success:function(e){e?t.setState({item:e.item,is_playing:e.is_playing,progress_ms:e.progress_ms,no_data:!1}):t.setState({no_data:!0})}})}},{key:"render",value:function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsxs)("header",{className:"App-header",children:[!this.state.token&&Object(b.jsx)("a",{className:"btn btn--loginApp-link",href:"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("7737cf22222c4dc4a8ac5c5439927cc9","&redirect_uri=").concat("http://localhost:3000/chatroom","&scope=").concat(g.join("%20"),"&response_type=token&show_dialog=true"),children:" Login to Spotify"}),this.state.token&&!this.state.no_data&&Object(b.jsx)(N,{item:this.state.item,is_playing:this.state.is_playing,progress_ms:this.state.progress_ms}),this.state.no_data&&Object(b.jsx)("p",{children:"You need to be playing a song on Spotify, for something to appear here."})]})})}}]),n}(s.Component),_=n(7),k=n(32),S=n.n(k),C=(n(52),n(103),n(104),function(){var e=Object(s.useState)(""),t=Object(_.a)(e,2),n=t[0],c=t[1];return Object(b.jsxs)("div",{className:"home-container",children:[Object(b.jsx)("input",{type:"text",placeholder:"Room",value:n,onChange:function(e){c(e.target.value)},className:"text-input-field"}),Object(b.jsx)(a.b,{to:"/".concat(n),className:"enter-room-button",children:"Join room"})]})}),E=(n(105),n(46)),P=n(35),I=n(22),T=n.n(I),A=n(33),U=n(79),M=n.n(U),R=n(34),B=n.n(R),L="NEW_CHAT_MESSAGE_EVENT",G="START_TYPING_MESSAGE_EVENT",V="STOP_TYPING_MESSAGE_EVENT",F="http://localhost:4000",q=function(e){var t=Object(s.useState)([]),n=Object(_.a)(t,2),c=n[0],r=n[1],a=Object(s.useState)([]),i=Object(_.a)(a,2),o=i[0],j=i[1],l=Object(s.useState)([]),u=Object(_.a)(l,2),b=u[0],d=u[1],m=Object(s.useState)(),h=Object(_.a)(m,2),O=h[0],p=h[1],x=Object(s.useRef)();Object(s.useEffect)((function(){(function(){var e=Object(A.a)(T.a.mark((function e(){var t,n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.get("https://api.randomuser.me/");case 2:t=e.sent,n=t.data.results[0],p({name:n.name.first,picture:n.picture.thumbnail});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(s.useEffect)((function(){(function(){var t=Object(A.a)(T.a.mark((function t(){var n,s;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.a.get("".concat(F,"/rooms/").concat(e,"/users"));case 2:n=t.sent,s=n.data.users,j(s);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),Object(s.useEffect)((function(){(function(){var t=Object(A.a)(T.a.mark((function t(){var n,s;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.a.get("".concat(F,"/rooms/").concat(e,"/messages"));case 2:n=t.sent,s=n.data.messages,r(s);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),Object(s.useEffect)((function(){if(O)return x.current=M()(F,{query:{roomId:e,name:O.name,picture:O.picture}}),x.current.on("connect",(function(){console.log(x.current.id)})),x.current.on("USER_JOIN_CHAT_EVENT",(function(e){e.id!==x.current.id&&j((function(t){return[].concat(Object(P.a)(t),[e])}))})),x.current.on("USER_LEAVE_CHAT_EVENT",(function(e){j((function(t){return t.filter((function(t){return t.id!==e.id}))}))})),x.current.on(L,(function(e){var t=Object(E.a)(Object(E.a)({},e),{},{ownedByCurrentUser:e.senderId===x.current.id});r((function(e){return[].concat(Object(P.a)(e),[t])}))})),x.current.on(G,(function(e){if(e.senderId!==x.current.id){var t=e.user;d((function(e){return[].concat(Object(P.a)(e),[t])}))}})),x.current.on(V,(function(e){if(e.senderId!==x.current.id){var t=e.user;d((function(e){return e.filter((function(e){return e.name!==t.name}))}))}})),function(){x.current.disconnect()}}),[e,O]);return{messages:c,user:O,users:o,typingUsers:b,sendMessage:function(e){x.current&&x.current.emit(L,{body:e,senderId:x.current.id,user:O})},startTypingMessage:function(){x.current&&x.current.emit(G,{senderId:x.current.id,user:O})},stopTypingMessage:function(){x.current&&x.current.emit(V,{senderId:x.current.id,user:O})}}},H=(n(153),function(e){var t=e.user;return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("img",{src:t.picture,alt:t.name,title:t.name,className:"avatar"})})}),J=(n(154),function(e){var t=e.message;return Object(b.jsxs)("div",{className:"message-item ".concat(t.ownedByCurrentUser?"my-message":"received-message"),children:[!t.ownedByCurrentUser&&Object(b.jsx)("div",{className:"message-avatar-container",children:Object(b.jsx)(H,{user:t.user})}),Object(b.jsxs)("div",{className:"message-body-container",children:[!t.ownedByCurrentUser&&Object(b.jsx)("div",{className:"message-user-name",children:t.user.name}),Object(b.jsx)("div",{className:"message-body",children:t.body})]})]})}),W=(n(155),function(e){var t=e.newMessage,n=e.handleNewMessageChange,s=e.handleStartTyping,c=e.handleStopTyping,r=e.handleSendMessage;return Object(b.jsxs)("form",{className:"new-message-form",children:[Object(b.jsx)("input",{type:"text",value:t,onChange:n,placeholder:"Aa",className:"new-message-input-field",onKeyPress:s,onKeyUp:c}),Object(b.jsx)("button",{type:"submit",onClick:r,className:"send-message-button",children:"Send"})]})}),z=(n(156),function(){return Object(b.jsxs)("div",{className:"dotsContainer",children:[Object(b.jsx)("span",{id:"dot1"}),Object(b.jsx)("span",{id:"dot2"}),Object(b.jsx)("span",{id:"dot3"})]})}),Y=(n(157),function(e){var t=e.user;return Object(b.jsxs)("div",{className:"message-item",children:[Object(b.jsx)("div",{className:"message-avatar-container",children:Object(b.jsx)("img",{src:t.picture,alt:t.name,className:"message-avatar"})}),Object(b.jsx)(z,{})]})}),D=(n(158),function(e){var t=e.users;return t.length>0?Object(b.jsxs)("div",{children:[Object(b.jsx)("h3",{children:"Users in this room:"}),Object(b.jsx)("ul",{className:"user-list",children:t.map((function(e,t){return Object(b.jsxs)("li",{className:"user-box",children:[Object(b.jsx)("span",{children:e.name}),Object(b.jsx)(H,{user:e})]},t)}))})]}):Object(b.jsx)("div",{children:"Chatroom is currently empty."})}),K=function(e){var t=e.match.params.roomId,n=q(t),c=n.messages,r=n.user,a=n.users,i=n.typingUsers,o=n.sendMessage,j=Object(s.useState)(""),l=Object(_.a)(j,2),u=l[0],d=l[1];return Object(b.jsxs)("div",{className:"chat-room-container",children:[Object(b.jsxs)("div",{className:"chat-room-top-bar",children:[Object(b.jsxs)("h1",{className:"room-name",children:["Room: ",t]}),r&&Object(b.jsx)(H,{user:r})]}),Object(b.jsx)(D,{users:a}),Object(b.jsx)("div",{className:"messages-container",children:Object(b.jsxs)("ol",{className:"messages-list",children:[c.map((function(e,t){return Object(b.jsx)("li",{children:Object(b.jsx)(J,{message:e})},t)})),i.map((function(e,t){return Object(b.jsx)("li",{children:Object(b.jsx)(Y,{user:e})},c.length+t)}))]})}),Object(b.jsx)(W,{newMessage:u,handleNewMessageChange:function(e){d(e.target.value)},handleSendMessage:function(e){e.preventDefault(),o(u),d("")}})]})};var Q=function(){return Object(b.jsx)(a.a,{children:Object(b.jsxs)(i.c,{children:[Object(b.jsx)(i.a,{exact:!0,path:"/",component:C}),Object(b.jsx)(i.a,{exact:!0,path:"/:roomId",component:K})]})})},X=(n(159),function(){var e=Object(s.useState)({isPaneOpen:!1,isPaneOpenLeft:!1}),t=Object(_.a)(e,2),n=t[0],c=t[1];return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{style:{marginTop:"38px"},children:Object(b.jsx)("button",{onClick:function(){return c({isPaneOpenBottom:!0})},children:"Click here to join the chatroom!"})}),Object(b.jsx)(S.a,{closeIcon:Object(b.jsx)("div",{children:"Click here to collapse the chat"}),className:"some-custom-class",isOpen:n.isPaneOpenBottom,title:"Welcome to the Bandstand chatroom!",from:"bottom",width:"100%",onRequestClose:function(){return c({isPaneOpenBottom:!1})},children:Object(b.jsx)("div",{children:Object(b.jsx)(Q,{})})})]})}),Z=n(80),$=function(){var e=Object(s.useState)({isPaneOpen:!1,isPaneOpenLeft:!1}),t=Object(_.a)(e,2),n=t[0],c=t[1];return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{style:{marginTop:"32px"},children:Object(b.jsx)("button",{onClick:function(){return c({isPaneOpenLeft:!0})},children:"User profile"})}),Object(b.jsx)(S.a,{closeIcon:Object(b.jsx)("div",{children:"Back"}),isOpen:n.isPaneOpenLeft,title:"",from:"left",width:"200px",onRequestClose:function(){return c({isPaneOpenLeft:!1})},children:Object(b.jsxs)("div",{children:[Object(b.jsx)(Z.a,{className:"Image",src:"user.jfif",width:150,height:150,roundedCircle:!0}),Object(b.jsx)("div",{className:"name",children:Object(b.jsx)("strong",{children:"Name of User"})}),Object(b.jsx)("br",{}),Object(b.jsxs)("div",{children:[Object(b.jsx)(a.b,{to:"#",children:Object(b.jsx)("button",{type:"submit",className:"btn btn-block",children:"Profile"})})," ",Object(b.jsx)("br",{}),Object(b.jsx)(a.b,{to:"#",children:Object(b.jsx)("button",{type:"submit",className:"btn btn-block",children:"Settings"})})]}),Object(b.jsx)("br",{}),Object(b.jsx)("div",{children:Object(b.jsx)(a.b,{to:"/",children:Object(b.jsx)("button",{type:"submit",className:"btn btn-block ",children:"Logout"})})})]})})]})};n(160);var ee=function(){return Object(b.jsx)("footer",{className:"footer",children:Object(b.jsx)("span",{children:"Copyright 'P3.T2' - 2021"})})};var te=function(){return Object(b.jsxs)("div",{style:{width:"100%",height:"90%"},children:[Object(b.jsx)(p,{}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsx)(h.a,{className:"main-row row justify-content-center",children:Object(b.jsxs)(O.a,{md:9,children:[Object(b.jsx)("br",{}),Object(b.jsx)(h.a,{className:"Row1 row justify-content-center",children:Object(b.jsx)("div",{className:"media",children:Object(b.jsx)(w,{})})}),Object(b.jsx)(h.a,{className:"row justify-content-center",children:Object(b.jsx)("div",{className:"side",children:Object(b.jsx)($,{children:" "})})}),Object(b.jsx)(h.a,{size:"row justify-content-center",children:Object(b.jsx)(O.a,{className:"chat",children:Object(b.jsx)(X,{})})})]})}),Object(b.jsx)(ee,{})]})};n(161);var ne=function(e){return Object(b.jsxs)("main",{className:"wrapper",children:[e.children," "]})},se=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return Object(b.jsxs)("form",{children:[Object(b.jsx)("h1",{children:Object(b.jsx)("strong",{children:"Forgot Password"})}),Object(b.jsx)("br",{}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{type:"email",className:"form-control",placeholder:"Enter email"})}),Object(b.jsx)("button",{type:"submit",className:"btnn btn-light btn-block",children:"Submit"}),Object(b.jsx)("p",{className:"forgot-password text-center",children:Object(b.jsx)("a",{href:"/Login",children:"Woops, I Remembered My Password"})})]})}}]),n}(s.Component);n(162);var ce=function(){return Object(b.jsx)(a.a,{children:Object(b.jsxs)(ne,{children:[Object(b.jsx)(i.a,{exact:!0,path:"/",component:d}),Object(b.jsx)(i.a,{exact:!0,path:"/Login",component:d}),Object(b.jsx)(i.a,{exact:!0,path:"/Signup",component:m}),Object(b.jsx)(i.a,{exact:!0,path:"/Chatroom",component:te}),Object(b.jsx)(i.a,{exact:!0,path:"/forgotPass",component:se}),Object(b.jsx)(i.a,{exact:!0,path:"/Panechat",component:X})]})})};n(163),n(164);r.a.render(Object(b.jsx)(ce,{}),document.getElementById("root"))},38:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){}},[[165,1,2]]]);
//# sourceMappingURL=main.7a0c1254.chunk.js.map